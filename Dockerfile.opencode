# OpenCode API Server Dockerfile
FROM oven/bun:latest

WORKDIR /workspace

# Install system dependencies
RUN apt-get update && apt-get install -y \
    curl \
    git \
    openssh-client \
    unzip \
    && rm -rf /var/lib/apt/lists/*

# Install OpenCode CLI using bun
RUN bun install -g @stacksjs/opencode

# Expose the port
EXPOSE 7777

# Start OpenCode server
CMD ["opencode", "serve", "--port", "7777"]
